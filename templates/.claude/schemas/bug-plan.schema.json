{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://example.com/schemas/bug-plan.schema.json",
  "title": "Bug Management Plan Schema",
  "description": "Schema for bug detection and fixing workflow plan files",
  "allOf": [
    {
      "$ref": "./base-plan.schema.json"
    }
  ],
  "properties": {
    "workflow": {
      "const": "bug-management"
    },
    "phase": {
      "enum": ["detection", "fixing", "verification"]
    },
    "config": {
      "type": "object",
      "required": ["priority"],
      "properties": {
        "priority": {
          "type": "string",
          "enum": ["critical", "high", "medium", "low", "all"],
          "description": "Bug priority level to process in this phase"
        },
        "categories": {
          "type": "array",
          "description": "Specific bug categories to focus on",
          "items": {
            "type": "string",
            "enum": ["security", "performance", "type-errors", "runtime-errors", "dead-code", "debug-code"]
          }
        },
        "maxBugsPerRun": {
          "type": "integer",
          "description": "Maximum bugs to fix in single run",
          "minimum": 1,
          "default": 50
        },
        "verifyOnly": {
          "type": "boolean",
          "description": "Run verification scan only (no fixes)",
          "default": false
        }
      }
    },
    "validation": {
      "type": "object",
      "properties": {
        "required": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["report-exists", "type-check", "build", "validation-passed"]
          }
        },
        "optional": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["tests", "lint", "no-new-bugs"]
          }
        }
      }
    },
    "nextAgent": {
      "enum": ["bug-hunter", "bug-fixer"]
    }
  }
}
